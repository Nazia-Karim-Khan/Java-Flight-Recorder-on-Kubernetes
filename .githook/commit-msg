#!/bin/bash

CC_REGEX="^(feat|fix|docs|style|refactor|test|chore)(\([a-zA-Z0-9_-]+\))?: .+"

# $1 is the commit message file
COMMIT_MSG_FILE=$1
FIRST_LINE=$(head -n1 "$COMMIT_MSG_FILE")

if ! echo "$FIRST_LINE" | grep -qE "$CC_REGEX"; then
    echo "‚ùå Commit rejected: must follow Conventional Commits format"
    echo "   Format: <type>[optional scope]: <description>"
    exit 1
fi

exit 0
